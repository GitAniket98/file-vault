{
  "address": "0x3e8f4A3B4C6895b05F6886D5ab9B1E47295CF1Bb",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "AccessGranted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "AccessRevoked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "uploader",
          "type": "address"
        }
      ],
      "name": "FileDeleted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "newCid",
          "type": "string"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "uploader",
          "type": "address"
        }
      ],
      "name": "FileUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "cid",
          "type": "string"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "uploader",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address[]",
          "name": "allowedUsers",
          "type": "address[]"
        }
      ],
      "name": "FileUploaded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "MAX_ALLOWED_USERS",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        }
      ],
      "name": "canAccess",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        }
      ],
      "name": "deleteFile",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        }
      ],
      "name": "fileExists",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        }
      ],
      "name": "getCid",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        }
      ],
      "name": "getUploader",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "grantAccess",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "internalType": "address[]",
          "name": "users",
          "type": "address[]"
        }
      ],
      "name": "grantAccessBatch",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "isAuthorized",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "revokeAccess",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "internalType": "string",
          "name": "cid",
          "type": "string"
        },
        {
          "internalType": "address[]",
          "name": "allowedUsers",
          "type": "address[]"
        }
      ],
      "name": "storeFileHash",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "fileHash",
          "type": "bytes32"
        },
        {
          "internalType": "string",
          "name": "newCid",
          "type": "string"
        }
      ],
      "name": "updateCid",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x13150a6441edf913e7dbbc0fe71d50b76020d63e8699f755fe5c4ce32a029a49",
  "receipt": {
    "to": null,
    "from": "0x009CEC7B2EE24aB63442C5aA3193FC7acBFde051",
    "contractAddress": "0x3e8f4A3B4C6895b05F6886D5ab9B1E47295CF1Bb",
    "transactionIndex": 1,
    "gasUsed": "1154455",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xa53b8a2f77e520bea2a519d3d445cbc58fc83b1d7478e1406b0bcd26214ef7d6",
    "transactionHash": "0x13150a6441edf913e7dbbc0fe71d50b76020d63e8699f755fe5c4ce32a029a49",
    "logs": [],
    "blockNumber": 38155639,
    "cumulativeGasUsed": "1200637",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 2,
  "solcInputHash": "98153a3dee025a041aa77849c9d04250",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"AccessGranted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"AccessRevoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"uploader\",\"type\":\"address\"}],\"name\":\"FileDeleted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"newCid\",\"type\":\"string\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"uploader\",\"type\":\"address\"}],\"name\":\"FileUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"cid\",\"type\":\"string\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"uploader\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address[]\",\"name\":\"allowedUsers\",\"type\":\"address[]\"}],\"name\":\"FileUploaded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"MAX_ALLOWED_USERS\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"}],\"name\":\"canAccess\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"}],\"name\":\"deleteFile\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"}],\"name\":\"fileExists\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"}],\"name\":\"getCid\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"}],\"name\":\"getUploader\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"grantAccess\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"internalType\":\"address[]\",\"name\":\"users\",\"type\":\"address[]\"}],\"name\":\"grantAccessBatch\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"isAuthorized\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"revokeAccess\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"internalType\":\"string\",\"name\":\"cid\",\"type\":\"string\"},{\"internalType\":\"address[]\",\"name\":\"allowedUsers\",\"type\":\"address[]\"}],\"name\":\"storeFileHash\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"fileHash\",\"type\":\"bytes32\"},{\"internalType\":\"string\",\"name\":\"newCid\",\"type\":\"string\"}],\"name\":\"updateCid\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"events\":{\"FileUploaded(bytes32,string,address,address[])\":{\"details\":\"Events for frontend/backends to track changes\"}},\"kind\":\"dev\",\"methods\":{\"canAccess(bytes32)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\"},\"returns\":{\"_0\":\"bool True if authorized, false otherwise\"}},\"deleteFile(bytes32)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\"}},\"fileExists(bytes32)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\"},\"returns\":{\"_0\":\"bool True if file exists, false otherwise\"}},\"getCid(bytes32)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\"},\"returns\":{\"_0\":\"string IPFS CID\"}},\"getUploader(bytes32)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\"},\"returns\":{\"_0\":\"address Address of the uploader\"}},\"grantAccess(bytes32,address)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\",\"user\":\"Address to grant access to\"}},\"grantAccessBatch(bytes32,address[])\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\",\"users\":\"Array of addresses to grant access to\"}},\"isAuthorized(bytes32,address)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\",\"user\":\"Address to check\"},\"returns\":{\"_0\":\"bool True if authorized, false otherwise\"}},\"revokeAccess(bytes32,address)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\",\"user\":\"Address to revoke access from\"}},\"storeFileHash(bytes32,string,address[])\":{\"params\":{\"allowedUsers\":\"List of addresses initially granted access\",\"cid\":\"IPFS CID of the encrypted file\",\"fileHash\":\"SHA-256 hash of the encrypted file\"}},\"transferOwnership(bytes32,address)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\",\"newOwner\":\"Address of the new owner\"}},\"updateCid(bytes32,string)\":{\"params\":{\"fileHash\":\"SHA-256 hash of the file\",\"newCid\":\"New IPFS CID\"}}},\"title\":\"FileVault - On-chain access control for encrypted off-chain storage\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"canAccess(bytes32)\":{\"notice\":\"Check if caller is authorized to access a file\"},\"deleteFile(bytes32)\":{\"notice\":\"Delete a file reference and clear all access (only uploader can delete)\"},\"fileExists(bytes32)\":{\"notice\":\"Check if a file exists\"},\"getCid(bytes32)\":{\"notice\":\"Get the CID of a file (only authorized users can access)\"},\"getUploader(bytes32)\":{\"notice\":\"Get the uploader of a file\"},\"grantAccess(bytes32,address)\":{\"notice\":\"Grant access to a user (only uploader can grant)\"},\"grantAccessBatch(bytes32,address[])\":{\"notice\":\"Grant access to multiple users (only uploader can grant)\"},\"isAuthorized(bytes32,address)\":{\"notice\":\"Check if a user is authorized to access a file\"},\"revokeAccess(bytes32,address)\":{\"notice\":\"Revoke access from a user (only uploader can revoke)\"},\"storeFileHash(bytes32,string,address[])\":{\"notice\":\"Upload a new file reference (CID + hash) and set initial access list\"},\"transferOwnership(bytes32,address)\":{\"notice\":\"Transfer ownership of a file to a new address (only uploader can transfer)\"},\"updateCid(bytes32,string)\":{\"notice\":\"Update the CID of an existing file (only uploader can update)\"}},\"notice\":\"Stores encrypted file references (hash + CID) and manages access with security improvements\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/fileVault.sol\":\"FileVault\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/fileVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\n/// @title FileVault - On-chain access control for encrypted off-chain storage\\n/// @notice Stores encrypted file references (hash + CID) and manages access with security improvements\\ncontract FileVault {\\n    struct File {\\n        address uploader; // Who uploaded the file\\n        string cid; // IPFS CID of the encrypted file\\n        mapping(address => bool) authorized; // Access control\\n        bool exists; // Flag to check if file exists\\n    }\\n\\n    // Constants for security limits\\n    uint256 public constant MAX_ALLOWED_USERS = 100;\\n\\n    // Mapping: fileHash (SHA-256 of encrypted file) => File struct\\n    mapping(bytes32 => File) private files;\\n\\n    /// @dev Events for frontend/backends to track changes\\n    event FileUploaded(bytes32 indexed fileHash, string cid, address indexed uploader, address[] allowedUsers);\\n    event FileUpdated(bytes32 indexed fileHash, string newCid, address indexed uploader);\\n    event FileDeleted(bytes32 indexed fileHash, address indexed uploader);\\n    event AccessGranted(bytes32 indexed fileHash, address indexed user);\\n    event AccessRevoked(bytes32 indexed fileHash, address indexed user);\\n    event OwnershipTransferred(bytes32 indexed fileHash, address indexed previousOwner, address indexed newOwner);\\n\\n    /// @notice Upload a new file reference (CID + hash) and set initial access list\\n    /// @param fileHash SHA-256 hash of the encrypted file\\n    /// @param cid IPFS CID of the encrypted file\\n    /// @param allowedUsers List of addresses initially granted access\\n    function storeFileHash(bytes32 fileHash, string calldata cid, address[] calldata allowedUsers) external {\\n        require(!files[fileHash].exists, \\\"File already exists\\\");\\n        require(bytes(cid).length > 0, \\\"CID cannot be empty\\\");\\n        require(allowedUsers.length <= MAX_ALLOWED_USERS, \\\"Too many users\\\");\\n\\n        File storage f = files[fileHash];\\n        f.uploader = msg.sender;\\n        f.cid = cid;\\n        f.exists = true;\\n\\n        // Automatically grant access to uploader\\n        f.authorized[msg.sender] = true;\\n\\n        // Grant access to allowed users (with duplicate and zero address checks)\\n        for (uint256 i = 0; i < allowedUsers.length; i++) {\\n            address user = allowedUsers[i];\\n            require(user != address(0), \\\"Invalid address in allowedUsers\\\");\\n\\n            // Only set if not already authorized (prevents wasted gas on duplicates)\\n            if (!f.authorized[user]) {\\n                f.authorized[user] = true;\\n            }\\n        }\\n\\n        emit FileUploaded(fileHash, cid, msg.sender, allowedUsers);\\n    }\\n\\n    /// @notice Update the CID of an existing file (only uploader can update)\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @param newCid New IPFS CID\\n    function updateCid(bytes32 fileHash, string calldata newCid) external {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        require(files[fileHash].uploader == msg.sender, \\\"Not uploader\\\");\\n        require(bytes(newCid).length > 0, \\\"CID cannot be empty\\\");\\n\\n        files[fileHash].cid = newCid;\\n        emit FileUpdated(fileHash, newCid, msg.sender);\\n    }\\n\\n    /// @notice Delete a file reference and clear all access (only uploader can delete)\\n    /// @param fileHash SHA-256 hash of the file\\n    function deleteFile(bytes32 fileHash) external {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        require(files[fileHash].uploader == msg.sender, \\\"Not uploader\\\");\\n\\n        // Note: Due to Solidity limitations, we cannot iterate and delete all authorized users\\n        // The mapping will remain in storage but the file is marked as deleted\\n        files[fileHash].exists = false;\\n        files[fileHash].uploader = address(0);\\n        files[fileHash].cid = \\\"\\\";\\n\\n        emit FileDeleted(fileHash, msg.sender);\\n    }\\n\\n    /// @notice Transfer ownership of a file to a new address (only uploader can transfer)\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @param newOwner Address of the new owner\\n    function transferOwnership(bytes32 fileHash, address newOwner) external {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        require(files[fileHash].uploader == msg.sender, \\\"Not uploader\\\");\\n        require(newOwner != address(0), \\\"Invalid new owner address\\\");\\n        require(newOwner != msg.sender, \\\"Already the owner\\\");\\n\\n        address previousOwner = files[fileHash].uploader;\\n        files[fileHash].uploader = newOwner;\\n\\n        // Automatically grant access to new owner\\n        files[fileHash].authorized[newOwner] = true;\\n\\n        emit OwnershipTransferred(fileHash, previousOwner, newOwner);\\n    }\\n\\n    /// @notice Grant access to a user (only uploader can grant)\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @param user Address to grant access to\\n    function grantAccess(bytes32 fileHash, address user) external {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        require(files[fileHash].uploader == msg.sender, \\\"Not uploader\\\");\\n        require(user != address(0), \\\"Invalid user address\\\");\\n\\n        files[fileHash].authorized[user] = true;\\n        emit AccessGranted(fileHash, user);\\n    }\\n\\n    /// @notice Grant access to multiple users (only uploader can grant)\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @param users Array of addresses to grant access to\\n    function grantAccessBatch(bytes32 fileHash, address[] calldata users) external {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        require(files[fileHash].uploader == msg.sender, \\\"Not uploader\\\");\\n        require(users.length <= MAX_ALLOWED_USERS, \\\"Too many users\\\");\\n\\n        for (uint256 i = 0; i < users.length; i++) {\\n            address user = users[i];\\n            require(user != address(0), \\\"Invalid user address\\\");\\n\\n            if (!files[fileHash].authorized[user]) {\\n                files[fileHash].authorized[user] = true;\\n                emit AccessGranted(fileHash, user);\\n            }\\n        }\\n    }\\n\\n    /// @notice Revoke access from a user (only uploader can revoke)\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @param user Address to revoke access from\\n    function revokeAccess(bytes32 fileHash, address user) external {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        require(files[fileHash].uploader == msg.sender, \\\"Not uploader\\\");\\n        require(user != address(0), \\\"Invalid user address\\\");\\n\\n        files[fileHash].authorized[user] = false;\\n        emit AccessRevoked(fileHash, user);\\n    }\\n\\n    /// @notice Check if a user is authorized to access a file\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @param user Address to check\\n    /// @return bool True if authorized, false otherwise\\n    function isAuthorized(bytes32 fileHash, address user) external view returns (bool) {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        return files[fileHash].authorized[user];\\n    }\\n\\n    /// @notice Check if caller is authorized to access a file\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @return bool True if authorized, false otherwise\\n    function canAccess(bytes32 fileHash) external view returns (bool) {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        return files[fileHash].authorized[msg.sender];\\n    }\\n\\n    /// @notice Get the uploader of a file\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @return address Address of the uploader\\n    function getUploader(bytes32 fileHash) external view returns (address) {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        return files[fileHash].uploader;\\n    }\\n\\n    /// @notice Get the CID of a file (only authorized users can access)\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @return string IPFS CID\\n    function getCid(bytes32 fileHash) external view returns (string memory) {\\n        require(files[fileHash].exists, \\\"File does not exist\\\");\\n        require(files[fileHash].authorized[msg.sender], \\\"Not authorized to access this file\\\");\\n        return files[fileHash].cid;\\n    }\\n\\n    /// @notice Check if a file exists\\n    /// @param fileHash SHA-256 hash of the file\\n    /// @return bool True if file exists, false otherwise\\n    function fileExists(bytes32 fileHash) external view returns (bool) {\\n        return files[fileHash].exists;\\n    }\\n}\\n\",\"keccak256\":\"0x32457922d8a2b2cb6caf9262c65eb940a8366992cd10cdb95512ed14fac44584\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b506113ea806100206000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c80636ab799f11161008c578063aa5de4bd11610066578063aa5de4bd146101c1578063ca44c140146101e1578063eac61dbd146101f4578063ef5d6bbb1461020a57600080fd5b80636ab799f1146101885780638d53b2081461019b578063956db465146101ae57600080fd5b80630982b69a146100d45780630cec5f62146100e95780631afb966d146101245780631e92a4dd1461013757806340554c3a1461016257806369e5fa8714610175575b600080fd5b6100e76100e2366004610e13565b61021d565b005b61010f6100f7366004610e5f565b60009081526020819052604090206003015460ff1690565b60405190151581526020015b60405180910390f35b61010f610132366004610e5f565b610336565b61014a610145366004610e5f565b610389565b6040516001600160a01b03909116815260200161011b565b6100e7610170366004610e94565b6103d6565b6100e7610183366004610f05565b6104c2565b6100e7610196366004610e5f565b610731565b6100e76101a9366004610e94565b610814565b61010f6101bc366004610e94565b6108fd565b6101d46101cf366004610e5f565b61095c565b60405161011b9190610f7f565b6100e76101ef366004610fcd565b610aa6565b6101fc606481565b60405190815260200161011b565b6100e7610218366004610e94565b610c4b565b60008381526020819052604090206003015460ff166102575760405162461bcd60e51b815260040161024e9061100c565b60405180910390fd5b6000838152602081905260409020546001600160a01b0316331461028d5760405162461bcd60e51b815260040161024e90611039565b806102d05760405162461bcd60e51b81526020600482015260136024820152724349442063616e6e6f7420626520656d70747960681b604482015260640161024e565b60008381526020819052604090206001016102ec8284836110fe565b50336001600160a01b0316837fb1f7bf30ab7e9cdf31dd97a458cbd0d9bd4f35da5674e10e47d5f826ebbc461484846040516103299291906111e8565b60405180910390a3505050565b60008181526020819052604081206003015460ff166103675760405162461bcd60e51b815260040161024e9061100c565b5060009081526020818152604080832033845260020190915290205460ff1690565b60008181526020819052604081206003015460ff166103ba5760405162461bcd60e51b815260040161024e9061100c565b506000908152602081905260409020546001600160a01b031690565b60008281526020819052604090206003015460ff166104075760405162461bcd60e51b815260040161024e9061100c565b6000828152602081905260409020546001600160a01b0316331461043d5760405162461bcd60e51b815260040161024e90611039565b6001600160a01b0381166104635760405162461bcd60e51b815260040161024e90611204565b6000828152602081815260408083206001600160a01b0385168085526002909101909252808320805460ff1916600117905551909184917ff20afd7b032307b01752ee91e3f6a4b83a5b4ab631f9ab279322fd45634382c09190a35050565b60008581526020819052604090206003015460ff161561051a5760405162461bcd60e51b815260206004820152601360248201527246696c6520616c72656164792065786973747360681b604482015260640161024e565b8261055d5760405162461bcd60e51b81526020600482015260136024820152724349442063616e6e6f7420626520656d70747960681b604482015260640161024e565b606481111561059f5760405162461bcd60e51b815260206004820152600e60248201526d546f6f206d616e7920757365727360901b604482015260640161024e565b600085815260208190526040902080546001600160a01b03191633178155600181016105cc8587836110fe565b50600381018054600160ff1991821681179092553360009081526002840160205260408120805490921690921790555b828110156106e057600084848381811061061857610618611232565b905060200201602081019061062d9190611248565b90506001600160a01b0381166106855760405162461bcd60e51b815260206004820152601f60248201527f496e76616c6964206164647265737320696e20616c6c6f776564557365727300604482015260640161024e565b6001600160a01b038116600090815260028401602052604090205460ff166106cd576001600160a01b03811660009081526002840160205260409020805460ff191660011790555b50806106d88161126a565b9150506105fc565b50336001600160a01b0316867f63871bfb42ebc1b1c2cff8a2382d4f32cb053002dded6519503ff65e0a41cdae878787876040516107219493929190611291565b60405180910390a3505050505050565b60008181526020819052604090206003015460ff166107625760405162461bcd60e51b815260040161024e9061100c565b6000818152602081905260409020546001600160a01b031633146107985760405162461bcd60e51b815260040161024e90611039565b60008181526020818152604080832060038101805460ff1916905580546001600160a01b03191681558151808401909252838252848452929091526001909101906107e390826112f4565b50604051339082907fe9d807989e1b989644726a2599acb272adc7eeafbc532de494ba8ded0593535190600090a350565b60008281526020819052604090206003015460ff166108455760405162461bcd60e51b815260040161024e9061100c565b6000828152602081905260409020546001600160a01b0316331461087b5760405162461bcd60e51b815260040161024e90611039565b6001600160a01b0381166108a15760405162461bcd60e51b815260040161024e90611204565b6000828152602081815260408083206001600160a01b0385168085526002909101909252808320805460ff1916905551909184917fe7906b77ea165c70ad8268ce5b59b778a198edf9c1ae4118378eefdc76fce5f49190a35050565b60008281526020819052604081206003015460ff1661092e5760405162461bcd60e51b815260040161024e9061100c565b506000828152602081815260408083206001600160a01b038516845260020190915290205460ff1692915050565b60008181526020819052604090206003015460609060ff166109905760405162461bcd60e51b815260040161024e9061100c565b60008281526020818152604080832033845260020190915290205460ff16610a055760405162461bcd60e51b815260206004820152602260248201527f4e6f7420617574686f72697a656420746f2061636365737320746869732066696044820152616c6560f01b606482015260840161024e565b60008281526020819052604090206001018054610a2190611075565b80601f0160208091040260200160405190810160405280929190818152602001828054610a4d90611075565b8015610a9a5780601f10610a6f57610100808354040283529160200191610a9a565b820191906000526020600020905b815481529060010190602001808311610a7d57829003601f168201915b50505050509050919050565b60008381526020819052604090206003015460ff16610ad75760405162461bcd60e51b815260040161024e9061100c565b6000838152602081905260409020546001600160a01b03163314610b0d5760405162461bcd60e51b815260040161024e90611039565b6064811115610b4f5760405162461bcd60e51b815260206004820152600e60248201526d546f6f206d616e7920757365727360901b604482015260640161024e565b60005b81811015610c45576000838383818110610b6e57610b6e611232565b9050602002016020810190610b839190611248565b90506001600160a01b038116610bab5760405162461bcd60e51b815260040161024e90611204565b6000858152602081815260408083206001600160a01b038516845260020190915290205460ff16610c32576000858152602081815260408083206001600160a01b0385168085526002909101909252808320805460ff1916600117905551909187917ff20afd7b032307b01752ee91e3f6a4b83a5b4ab631f9ab279322fd45634382c09190a35b5080610c3d8161126a565b915050610b52565b50505050565b60008281526020819052604090206003015460ff16610c7c5760405162461bcd60e51b815260040161024e9061100c565b6000828152602081905260409020546001600160a01b03163314610cb25760405162461bcd60e51b815260040161024e90611039565b6001600160a01b038116610d085760405162461bcd60e51b815260206004820152601960248201527f496e76616c6964206e6577206f776e6572206164647265737300000000000000604482015260640161024e565b336001600160a01b03821603610d545760405162461bcd60e51b815260206004820152601160248201527020b63932b0b23c903a34329037bbb732b960791b604482015260640161024e565b60008281526020818152604080832080546001600160a01b031981166001600160a01b0387811691821784558187526002909301909452828520805460ff191660011790559151911692839186917f0b659dccc8eb950324170e8d9598af5ee04ee070883eb28651a96788721fbf8391a4505050565b60008083601f840112610ddc57600080fd5b50813567ffffffffffffffff811115610df457600080fd5b602083019150836020828501011115610e0c57600080fd5b9250929050565b600080600060408486031215610e2857600080fd5b83359250602084013567ffffffffffffffff811115610e4657600080fd5b610e5286828701610dca565b9497909650939450505050565b600060208284031215610e7157600080fd5b5035919050565b80356001600160a01b0381168114610e8f57600080fd5b919050565b60008060408385031215610ea757600080fd5b82359150610eb760208401610e78565b90509250929050565b60008083601f840112610ed257600080fd5b50813567ffffffffffffffff811115610eea57600080fd5b6020830191508360208260051b8501011115610e0c57600080fd5b600080600080600060608688031215610f1d57600080fd5b85359450602086013567ffffffffffffffff80821115610f3c57600080fd5b610f4889838a01610dca565b90965094506040880135915080821115610f6157600080fd5b50610f6e88828901610ec0565b969995985093965092949392505050565b600060208083528351808285015260005b81811015610fac57858101830151858201604001528201610f90565b506000604082860101526040601f19601f8301168501019250505092915050565b600080600060408486031215610fe257600080fd5b83359250602084013567ffffffffffffffff81111561100057600080fd5b610e5286828701610ec0565b602080825260139082015272119a5b1948191bd95cc81b9bdd08195e1a5cdd606a1b604082015260600190565b6020808252600c908201526b2737ba103ab83637b0b232b960a11b604082015260600190565b634e487b7160e01b600052604160045260246000fd5b600181811c9082168061108957607f821691505b6020821081036110a957634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156110f957600081815260208120601f850160051c810160208610156110d65750805b601f850160051c820191505b818110156110f5578281556001016110e2565b5050505b505050565b67ffffffffffffffff8311156111165761111661105f565b61112a836111248354611075565b836110af565b6000601f84116001811461115e57600085156111465750838201355b600019600387901b1c1916600186901b1783556111b8565b600083815260209020601f19861690835b8281101561118f578685013582556020948501946001909201910161116f565b50868210156111ac5760001960f88860031b161c19848701351681555b505060018560011b0183555b5050505050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b6020815260006111fc6020830184866111bf565b949350505050565b602080825260149082015273496e76616c69642075736572206164647265737360601b604082015260600190565b634e487b7160e01b600052603260045260246000fd5b60006020828403121561125a57600080fd5b61126382610e78565b9392505050565b60006001820161128a57634e487b7160e01b600052601160045260246000fd5b5060010190565b6040815260006112a56040830186886111bf565b8281036020848101919091528482528591810160005b868110156112e7576001600160a01b036112d485610e78565b16825292820192908201906001016112bb565b5098975050505050505050565b815167ffffffffffffffff81111561130e5761130e61105f565b6113228161131c8454611075565b846110af565b602080601f831160018114611357576000841561133f5750858301515b600019600386901b1c1916600185901b1785556110f5565b600085815260208120601f198616915b8281101561138657888601518255948401946001909101908401611367565b50858210156113a45787850151600019600388901b60f8161c191681555b5050505050600190811b0190555056fea26469706673582212207fe74254f896d5f7031925b99b096efdb15c8bd31f0dd7006f0fa80412806c0164736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c80636ab799f11161008c578063aa5de4bd11610066578063aa5de4bd146101c1578063ca44c140146101e1578063eac61dbd146101f4578063ef5d6bbb1461020a57600080fd5b80636ab799f1146101885780638d53b2081461019b578063956db465146101ae57600080fd5b80630982b69a146100d45780630cec5f62146100e95780631afb966d146101245780631e92a4dd1461013757806340554c3a1461016257806369e5fa8714610175575b600080fd5b6100e76100e2366004610e13565b61021d565b005b61010f6100f7366004610e5f565b60009081526020819052604090206003015460ff1690565b60405190151581526020015b60405180910390f35b61010f610132366004610e5f565b610336565b61014a610145366004610e5f565b610389565b6040516001600160a01b03909116815260200161011b565b6100e7610170366004610e94565b6103d6565b6100e7610183366004610f05565b6104c2565b6100e7610196366004610e5f565b610731565b6100e76101a9366004610e94565b610814565b61010f6101bc366004610e94565b6108fd565b6101d46101cf366004610e5f565b61095c565b60405161011b9190610f7f565b6100e76101ef366004610fcd565b610aa6565b6101fc606481565b60405190815260200161011b565b6100e7610218366004610e94565b610c4b565b60008381526020819052604090206003015460ff166102575760405162461bcd60e51b815260040161024e9061100c565b60405180910390fd5b6000838152602081905260409020546001600160a01b0316331461028d5760405162461bcd60e51b815260040161024e90611039565b806102d05760405162461bcd60e51b81526020600482015260136024820152724349442063616e6e6f7420626520656d70747960681b604482015260640161024e565b60008381526020819052604090206001016102ec8284836110fe565b50336001600160a01b0316837fb1f7bf30ab7e9cdf31dd97a458cbd0d9bd4f35da5674e10e47d5f826ebbc461484846040516103299291906111e8565b60405180910390a3505050565b60008181526020819052604081206003015460ff166103675760405162461bcd60e51b815260040161024e9061100c565b5060009081526020818152604080832033845260020190915290205460ff1690565b60008181526020819052604081206003015460ff166103ba5760405162461bcd60e51b815260040161024e9061100c565b506000908152602081905260409020546001600160a01b031690565b60008281526020819052604090206003015460ff166104075760405162461bcd60e51b815260040161024e9061100c565b6000828152602081905260409020546001600160a01b0316331461043d5760405162461bcd60e51b815260040161024e90611039565b6001600160a01b0381166104635760405162461bcd60e51b815260040161024e90611204565b6000828152602081815260408083206001600160a01b0385168085526002909101909252808320805460ff1916600117905551909184917ff20afd7b032307b01752ee91e3f6a4b83a5b4ab631f9ab279322fd45634382c09190a35050565b60008581526020819052604090206003015460ff161561051a5760405162461bcd60e51b815260206004820152601360248201527246696c6520616c72656164792065786973747360681b604482015260640161024e565b8261055d5760405162461bcd60e51b81526020600482015260136024820152724349442063616e6e6f7420626520656d70747960681b604482015260640161024e565b606481111561059f5760405162461bcd60e51b815260206004820152600e60248201526d546f6f206d616e7920757365727360901b604482015260640161024e565b600085815260208190526040902080546001600160a01b03191633178155600181016105cc8587836110fe565b50600381018054600160ff1991821681179092553360009081526002840160205260408120805490921690921790555b828110156106e057600084848381811061061857610618611232565b905060200201602081019061062d9190611248565b90506001600160a01b0381166106855760405162461bcd60e51b815260206004820152601f60248201527f496e76616c6964206164647265737320696e20616c6c6f776564557365727300604482015260640161024e565b6001600160a01b038116600090815260028401602052604090205460ff166106cd576001600160a01b03811660009081526002840160205260409020805460ff191660011790555b50806106d88161126a565b9150506105fc565b50336001600160a01b0316867f63871bfb42ebc1b1c2cff8a2382d4f32cb053002dded6519503ff65e0a41cdae878787876040516107219493929190611291565b60405180910390a3505050505050565b60008181526020819052604090206003015460ff166107625760405162461bcd60e51b815260040161024e9061100c565b6000818152602081905260409020546001600160a01b031633146107985760405162461bcd60e51b815260040161024e90611039565b60008181526020818152604080832060038101805460ff1916905580546001600160a01b03191681558151808401909252838252848452929091526001909101906107e390826112f4565b50604051339082907fe9d807989e1b989644726a2599acb272adc7eeafbc532de494ba8ded0593535190600090a350565b60008281526020819052604090206003015460ff166108455760405162461bcd60e51b815260040161024e9061100c565b6000828152602081905260409020546001600160a01b0316331461087b5760405162461bcd60e51b815260040161024e90611039565b6001600160a01b0381166108a15760405162461bcd60e51b815260040161024e90611204565b6000828152602081815260408083206001600160a01b0385168085526002909101909252808320805460ff1916905551909184917fe7906b77ea165c70ad8268ce5b59b778a198edf9c1ae4118378eefdc76fce5f49190a35050565b60008281526020819052604081206003015460ff1661092e5760405162461bcd60e51b815260040161024e9061100c565b506000828152602081815260408083206001600160a01b038516845260020190915290205460ff1692915050565b60008181526020819052604090206003015460609060ff166109905760405162461bcd60e51b815260040161024e9061100c565b60008281526020818152604080832033845260020190915290205460ff16610a055760405162461bcd60e51b815260206004820152602260248201527f4e6f7420617574686f72697a656420746f2061636365737320746869732066696044820152616c6560f01b606482015260840161024e565b60008281526020819052604090206001018054610a2190611075565b80601f0160208091040260200160405190810160405280929190818152602001828054610a4d90611075565b8015610a9a5780601f10610a6f57610100808354040283529160200191610a9a565b820191906000526020600020905b815481529060010190602001808311610a7d57829003601f168201915b50505050509050919050565b60008381526020819052604090206003015460ff16610ad75760405162461bcd60e51b815260040161024e9061100c565b6000838152602081905260409020546001600160a01b03163314610b0d5760405162461bcd60e51b815260040161024e90611039565b6064811115610b4f5760405162461bcd60e51b815260206004820152600e60248201526d546f6f206d616e7920757365727360901b604482015260640161024e565b60005b81811015610c45576000838383818110610b6e57610b6e611232565b9050602002016020810190610b839190611248565b90506001600160a01b038116610bab5760405162461bcd60e51b815260040161024e90611204565b6000858152602081815260408083206001600160a01b038516845260020190915290205460ff16610c32576000858152602081815260408083206001600160a01b0385168085526002909101909252808320805460ff1916600117905551909187917ff20afd7b032307b01752ee91e3f6a4b83a5b4ab631f9ab279322fd45634382c09190a35b5080610c3d8161126a565b915050610b52565b50505050565b60008281526020819052604090206003015460ff16610c7c5760405162461bcd60e51b815260040161024e9061100c565b6000828152602081905260409020546001600160a01b03163314610cb25760405162461bcd60e51b815260040161024e90611039565b6001600160a01b038116610d085760405162461bcd60e51b815260206004820152601960248201527f496e76616c6964206e6577206f776e6572206164647265737300000000000000604482015260640161024e565b336001600160a01b03821603610d545760405162461bcd60e51b815260206004820152601160248201527020b63932b0b23c903a34329037bbb732b960791b604482015260640161024e565b60008281526020818152604080832080546001600160a01b031981166001600160a01b0387811691821784558187526002909301909452828520805460ff191660011790559151911692839186917f0b659dccc8eb950324170e8d9598af5ee04ee070883eb28651a96788721fbf8391a4505050565b60008083601f840112610ddc57600080fd5b50813567ffffffffffffffff811115610df457600080fd5b602083019150836020828501011115610e0c57600080fd5b9250929050565b600080600060408486031215610e2857600080fd5b83359250602084013567ffffffffffffffff811115610e4657600080fd5b610e5286828701610dca565b9497909650939450505050565b600060208284031215610e7157600080fd5b5035919050565b80356001600160a01b0381168114610e8f57600080fd5b919050565b60008060408385031215610ea757600080fd5b82359150610eb760208401610e78565b90509250929050565b60008083601f840112610ed257600080fd5b50813567ffffffffffffffff811115610eea57600080fd5b6020830191508360208260051b8501011115610e0c57600080fd5b600080600080600060608688031215610f1d57600080fd5b85359450602086013567ffffffffffffffff80821115610f3c57600080fd5b610f4889838a01610dca565b90965094506040880135915080821115610f6157600080fd5b50610f6e88828901610ec0565b969995985093965092949392505050565b600060208083528351808285015260005b81811015610fac57858101830151858201604001528201610f90565b506000604082860101526040601f19601f8301168501019250505092915050565b600080600060408486031215610fe257600080fd5b83359250602084013567ffffffffffffffff81111561100057600080fd5b610e5286828701610ec0565b602080825260139082015272119a5b1948191bd95cc81b9bdd08195e1a5cdd606a1b604082015260600190565b6020808252600c908201526b2737ba103ab83637b0b232b960a11b604082015260600190565b634e487b7160e01b600052604160045260246000fd5b600181811c9082168061108957607f821691505b6020821081036110a957634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156110f957600081815260208120601f850160051c810160208610156110d65750805b601f850160051c820191505b818110156110f5578281556001016110e2565b5050505b505050565b67ffffffffffffffff8311156111165761111661105f565b61112a836111248354611075565b836110af565b6000601f84116001811461115e57600085156111465750838201355b600019600387901b1c1916600186901b1783556111b8565b600083815260209020601f19861690835b8281101561118f578685013582556020948501946001909201910161116f565b50868210156111ac5760001960f88860031b161c19848701351681555b505060018560011b0183555b5050505050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b6020815260006111fc6020830184866111bf565b949350505050565b602080825260149082015273496e76616c69642075736572206164647265737360601b604082015260600190565b634e487b7160e01b600052603260045260246000fd5b60006020828403121561125a57600080fd5b61126382610e78565b9392505050565b60006001820161128a57634e487b7160e01b600052601160045260246000fd5b5060010190565b6040815260006112a56040830186886111bf565b8281036020848101919091528482528591810160005b868110156112e7576001600160a01b036112d485610e78565b16825292820192908201906001016112bb565b5098975050505050505050565b815167ffffffffffffffff81111561130e5761130e61105f565b6113228161131c8454611075565b846110af565b602080601f831160018114611357576000841561133f5750858301515b600019600386901b1c1916600185901b1785556110f5565b600085815260208120601f198616915b8281101561138657888601518255948401946001909101908401611367565b50858210156113a45787850151600019600388901b60f8161c191681555b5050505050600190811b0190555056fea26469706673582212207fe74254f896d5f7031925b99b096efdb15c8bd31f0dd7006f0fa80412806c0164736f6c63430008140033",
  "devdoc": {
    "events": {
      "FileUploaded(bytes32,string,address,address[])": {
        "details": "Events for frontend/backends to track changes"
      }
    },
    "kind": "dev",
    "methods": {
      "canAccess(bytes32)": {
        "params": {
          "fileHash": "SHA-256 hash of the file"
        },
        "returns": {
          "_0": "bool True if authorized, false otherwise"
        }
      },
      "deleteFile(bytes32)": {
        "params": {
          "fileHash": "SHA-256 hash of the file"
        }
      },
      "fileExists(bytes32)": {
        "params": {
          "fileHash": "SHA-256 hash of the file"
        },
        "returns": {
          "_0": "bool True if file exists, false otherwise"
        }
      },
      "getCid(bytes32)": {
        "params": {
          "fileHash": "SHA-256 hash of the file"
        },
        "returns": {
          "_0": "string IPFS CID"
        }
      },
      "getUploader(bytes32)": {
        "params": {
          "fileHash": "SHA-256 hash of the file"
        },
        "returns": {
          "_0": "address Address of the uploader"
        }
      },
      "grantAccess(bytes32,address)": {
        "params": {
          "fileHash": "SHA-256 hash of the file",
          "user": "Address to grant access to"
        }
      },
      "grantAccessBatch(bytes32,address[])": {
        "params": {
          "fileHash": "SHA-256 hash of the file",
          "users": "Array of addresses to grant access to"
        }
      },
      "isAuthorized(bytes32,address)": {
        "params": {
          "fileHash": "SHA-256 hash of the file",
          "user": "Address to check"
        },
        "returns": {
          "_0": "bool True if authorized, false otherwise"
        }
      },
      "revokeAccess(bytes32,address)": {
        "params": {
          "fileHash": "SHA-256 hash of the file",
          "user": "Address to revoke access from"
        }
      },
      "storeFileHash(bytes32,string,address[])": {
        "params": {
          "allowedUsers": "List of addresses initially granted access",
          "cid": "IPFS CID of the encrypted file",
          "fileHash": "SHA-256 hash of the encrypted file"
        }
      },
      "transferOwnership(bytes32,address)": {
        "params": {
          "fileHash": "SHA-256 hash of the file",
          "newOwner": "Address of the new owner"
        }
      },
      "updateCid(bytes32,string)": {
        "params": {
          "fileHash": "SHA-256 hash of the file",
          "newCid": "New IPFS CID"
        }
      }
    },
    "title": "FileVault - On-chain access control for encrypted off-chain storage",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "canAccess(bytes32)": {
        "notice": "Check if caller is authorized to access a file"
      },
      "deleteFile(bytes32)": {
        "notice": "Delete a file reference and clear all access (only uploader can delete)"
      },
      "fileExists(bytes32)": {
        "notice": "Check if a file exists"
      },
      "getCid(bytes32)": {
        "notice": "Get the CID of a file (only authorized users can access)"
      },
      "getUploader(bytes32)": {
        "notice": "Get the uploader of a file"
      },
      "grantAccess(bytes32,address)": {
        "notice": "Grant access to a user (only uploader can grant)"
      },
      "grantAccessBatch(bytes32,address[])": {
        "notice": "Grant access to multiple users (only uploader can grant)"
      },
      "isAuthorized(bytes32,address)": {
        "notice": "Check if a user is authorized to access a file"
      },
      "revokeAccess(bytes32,address)": {
        "notice": "Revoke access from a user (only uploader can revoke)"
      },
      "storeFileHash(bytes32,string,address[])": {
        "notice": "Upload a new file reference (CID + hash) and set initial access list"
      },
      "transferOwnership(bytes32,address)": {
        "notice": "Transfer ownership of a file to a new address (only uploader can transfer)"
      },
      "updateCid(bytes32,string)": {
        "notice": "Update the CID of an existing file (only uploader can update)"
      }
    },
    "notice": "Stores encrypted file references (hash + CID) and manages access with security improvements",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 21,
        "contract": "contracts/fileVault.sol:FileVault",
        "label": "files",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_bytes32,t_struct(File)13_storage)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_bytes32": {
        "encoding": "inplace",
        "label": "bytes32",
        "numberOfBytes": "32"
      },
      "t_mapping(t_address,t_bool)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => bool)",
        "numberOfBytes": "32",
        "value": "t_bool"
      },
      "t_mapping(t_bytes32,t_struct(File)13_storage)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => struct FileVault.File)",
        "numberOfBytes": "32",
        "value": "t_struct(File)13_storage"
      },
      "t_string_storage": {
        "encoding": "bytes",
        "label": "string",
        "numberOfBytes": "32"
      },
      "t_struct(File)13_storage": {
        "encoding": "inplace",
        "label": "struct FileVault.File",
        "members": [
          {
            "astId": 4,
            "contract": "contracts/fileVault.sol:FileVault",
            "label": "uploader",
            "offset": 0,
            "slot": "0",
            "type": "t_address"
          },
          {
            "astId": 6,
            "contract": "contracts/fileVault.sol:FileVault",
            "label": "cid",
            "offset": 0,
            "slot": "1",
            "type": "t_string_storage"
          },
          {
            "astId": 10,
            "contract": "contracts/fileVault.sol:FileVault",
            "label": "authorized",
            "offset": 0,
            "slot": "2",
            "type": "t_mapping(t_address,t_bool)"
          },
          {
            "astId": 12,
            "contract": "contracts/fileVault.sol:FileVault",
            "label": "exists",
            "offset": 0,
            "slot": "3",
            "type": "t_bool"
          }
        ],
        "numberOfBytes": "128"
      }
    }
  }
}